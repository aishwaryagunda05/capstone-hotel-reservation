<div class="form-container">
    <div class="form-header">
        <h2>{{ isEditMode ? 'Edit User' : 'Create New User' }}</h2>
        <p>Manage user access and permissions.</p>
    </div>

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="user-form">

        <div class="form-row">
            <div class="form-group">
                <label for="userName">Username <span class="required">*</span></label>
                <input type="text" id="userName" formControlName="userName" placeholder="jdoe"
                    [class.invalid]="submitted && f['userName'].errors">
                <div class="error-msg" *ngIf="submitted && f['userName'].errors">Username is required</div>
            </div>

            <div class="form-group">
                <label for="role">Role <span class="required">*</span></label>
                <select id="role" formControlName="role">
                    <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="email">Email <span class="required">*</span></label>
                <input type="email" id="email" formControlName="email" placeholder="email@example.com"
                    [class.invalid]="submitted && f['email'].errors">
                <div class="error-msg" *ngIf="submitted && f['email'].errors">Valid email is required</div>
            </div>

            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="text" id="phone" formControlName="phone" placeholder="10-digit number"
                    [class.invalid]="submitted && f['phone'].errors">
                <div class="error-msg" *ngIf="submitted && f['phone'].errors">Invalid phone format</div>
            </div>
        </div>

        <div class="form-group">
            <label for="password">Password <span class="required" *ngIf="!isEditMode">*</span></label>
            <input type="password" id="password" formControlName="password"
                placeholder="{{ isEditMode ? 'Leave blank to keep current' : 'Enter password' }}"
                [class.invalid]="submitted && f['password'].errors">
            <div class="error-msg" *ngIf="submitted && f['password'].errors">Password is required (min 6 chars)</div>
        </div>

        <div class="form-actions">
            <button type="button" class="cancel-btn" routerLink="/admin/users">Cancel</button>
            <button type="submit" class="submit-btn" [disabled]="loading">
                {{ loading ? 'Saving...' : (isEditMode ? 'Update User' : 'Create User') }}
            </button>
        </div>

    </form>
</div>